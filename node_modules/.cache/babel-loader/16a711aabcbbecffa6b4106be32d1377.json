{"ast":null,"code":"var _jsxFileName = \"C:\\\\React\\\\eVideoPrime_Final\\\\src\\\\containers\\\\Order.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport PaymentService from '../services/PaymentService';\nimport UtilService from '../services/UtilService';\nimport { RECEIPT_ID, RAZORPAY, TAX } from \"../helpers/constant\";\nimport authUser from '../helpers/authUser'; //https://razorpay.com/docs/payment-gateway/web-integration/standard/\n//https://dev.to/soumyadey/integrate-razorpay-in-your-react-app-2nib\n//must be outside\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RAZORPAY_OPTIONS = {\n  \"key\": \"\",\n  \"amount\": \"\",\n  \"currency\": \"\",\n  \"name\": \"\",\n  \"description\": \"\",\n  \"image\": \"/logo.png\",\n  \"order_id\": \"\",\n  \"handler\": res => {\n    console.log(res);\n  },\n  \"prefill\": {\n    \"name\": \"\",\n    \"email\": \"\",\n    \"contact\": \"\"\n  },\n  \"notes\": {\n    \"address\": \"NA\"\n  },\n  \"theme\": {\n    \"color\": \"#4285F4\"\n  }\n};\nexport default function Order() {\n  _s();\n\n  const [plan, setplan] = useState({});\n  let navigate = useNavigate();\n  const user = authUser.Get();\n  useEffect(() => {\n    let dataEnc = localStorage.getItem('p');\n    const planData = UtilService.Decrypt(dataEnc);\n    let order = {\n      total: planData.total,\n      currency: planData.currency,\n      receipt: 'NA'\n    };\n    PaymentService.CreateOrder(order).then(res => {\n      // console.log(res);\n      if (res.status == 200) {\n        //  console.log(res.data)\n        RAZORPAY_OPTIONS.order_id = res.data.orderId;\n      }\n    }, err => console.log(err));\n    setplan(planData); //append js\n\n    const script = document.createElement('script');\n    script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n    script.async = true;\n    document.body.appendChild(script);\n  }, []); //must be anonymous function\n\n  const payWithRazorPay = function () {\n    RAZORPAY_OPTIONS.name = user.name;\n    RAZORPAY_OPTIONS.description = plan.name;\n    RAZORPAY_OPTIONS.key = RAZORPAY.key;\n    RAZORPAY_OPTIONS.amount = (plan.price * 100).toString();\n    RAZORPAY_OPTIONS.currency = plan.currency;\n    RAZORPAY_OPTIONS.prefill.name = user.name;\n    RAZORPAY_OPTIONS.prefill.email = user.email;\n    RAZORPAY_OPTIONS.prefill.contact = user.phoneNumber; // binding this object to both success and dismiss handler\n\n    RAZORPAY_OPTIONS.handler = razorPaySuccessHandler.bind(this); // console.log(RAZORPAY_OPTIONS);\n    //show popup\n\n    let razorpay = new window.Razorpay(RAZORPAY_OPTIONS);\n    razorpay.open();\n  }; //must be anonymous function\n\n\n  const razorPaySuccessHandler = function (res) {\n    //console.log(res);\n    var payment = {\n      planId: plan.id,\n      planName: plan.name,\n      price: plan.price,\n      total: plan.total,\n      tax: plan.tax,\n      signature: res.razorpay_signature,\n      orderId: res.razorpay_order_id,\n      currency: plan.currency,\n      email: user.email,\n      paymentId: res.razorpay_payment_id,\n      userId: user.id\n    }; //console.log(payment);\n\n    PaymentService.SavePaymentDetails(payment).then(res => {\n      //console.log(res);\n      if (res.status == 200) {\n        let encData = UtilService.Encrypt(res.data);\n        localStorage.setItem(RECEIPT_ID, encData);\n        navigate('/receipt');\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-sm-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Order Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list-group list-group-flush\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"list-group-item d-flex justify-content-between align-items-center border-0 px-0\",\n          children: [\"Plan Details\", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: plan.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"list-group-item d-flex justify-content-between align-items-center border-0 px-0\",\n          children: [\"Amount\", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: plan.price\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"list-group-item d-flex justify-content-between align-items-center border-0 px-0\",\n          children: [\"Tax (\", TAX.GST, \"%)\", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"+\", plan.tax]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"list-group-item d-flex justify-content-between align-items-center  px-0 mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Total Amount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: plan.total\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 31\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        onClick: payWithRazorPay,\n        className: \"btn btn-primary btn-block\",\n        children: \"Pay With RazorPay\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Order, \"KP2O6v/wDq0AgDS0FPmPoakwUrU=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Order;\n\nvar _c;\n\n$RefreshReg$(_c, \"Order\");","map":{"version":3,"sources":["C:/React/eVideoPrime_Final/src/containers/Order.js"],"names":["React","useEffect","useState","useNavigate","PaymentService","UtilService","RECEIPT_ID","RAZORPAY","TAX","authUser","RAZORPAY_OPTIONS","res","console","log","Order","plan","setplan","navigate","user","Get","dataEnc","localStorage","getItem","planData","Decrypt","order","total","currency","receipt","CreateOrder","then","status","order_id","data","orderId","err","script","document","createElement","src","async","body","appendChild","payWithRazorPay","name","description","key","amount","price","toString","prefill","email","contact","phoneNumber","handler","razorPaySuccessHandler","bind","razorpay","window","Razorpay","open","payment","planId","id","planName","tax","signature","razorpay_signature","razorpay_order_id","paymentId","razorpay_payment_id","userId","SavePaymentDetails","encData","Encrypt","setItem","GST"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useNavigate } from 'react-router-dom'\n\nimport PaymentService from '../services/PaymentService';\nimport UtilService from '../services/UtilService';\nimport { RECEIPT_ID, RAZORPAY, TAX } from \"../helpers/constant\";\nimport authUser from '../helpers/authUser';\n\n//https://razorpay.com/docs/payment-gateway/web-integration/standard/\n//https://dev.to/soumyadey/integrate-razorpay-in-your-react-app-2nib\n\n//must be outside\nconst RAZORPAY_OPTIONS = {\n    \"key\": \"\",\n    \"amount\": \"\",\n    \"currency\": \"\",\n    \"name\": \"\",\n    \"description\": \"\",\n    \"image\": \"/logo.png\",\n    \"order_id\": \"\",\n    \"handler\": (res) => {\n        console.log(res);\n    },\n    \"prefill\": {\n        \"name\": \"\",\n        \"email\": \"\",\n        \"contact\": \"\"\n    },\n    \"notes\": {\n        \"address\": \"NA\"\n    },\n    \"theme\": {\n        \"color\": \"#4285F4\"\n    }\n};\n\nexport default function Order() {\n    const [plan, setplan] = useState({});\n    let navigate = useNavigate();\n    const user = authUser.Get();\n    useEffect(() => {\n        let dataEnc = localStorage.getItem('p');\n        const planData = UtilService.Decrypt(dataEnc);\n        let order = { total: planData.total, currency: planData.currency, receipt: 'NA' };\n        PaymentService.CreateOrder(order).then((res) => {\n           // console.log(res);\n            if (res.status == 200) {\n              //  console.log(res.data)\n                RAZORPAY_OPTIONS.order_id = res.data.orderId;\n            }\n        }, (err) => console.log(err));\n\n        setplan(planData);\n\n        //append js\n        const script = document.createElement('script');\n        script.src = 'https://checkout.razorpay.com/v1/checkout.js';\n        script.async = true;\n        document.body.appendChild(script);\n    }, []);\n\n   //must be anonymous function\n    const payWithRazorPay = function () {\n        RAZORPAY_OPTIONS.name = user.name;\n        RAZORPAY_OPTIONS.description = plan.name;\n        RAZORPAY_OPTIONS.key = RAZORPAY.key;\n        RAZORPAY_OPTIONS.amount = (plan.price * 100).toString();\n        RAZORPAY_OPTIONS.currency = plan.currency;\n\n        RAZORPAY_OPTIONS.prefill.name = user.name;\n        RAZORPAY_OPTIONS.prefill.email = user.email;\n        RAZORPAY_OPTIONS.prefill.contact = user.phoneNumber;\n\n        // binding this object to both success and dismiss handler\n        RAZORPAY_OPTIONS.handler = razorPaySuccessHandler.bind(this);\n\n       // console.log(RAZORPAY_OPTIONS);\n        //show popup\n        let razorpay = new window.Razorpay(RAZORPAY_OPTIONS)\n        razorpay.open();\n    }\n    //must be anonymous function\n    const razorPaySuccessHandler = function (res) {\n        //console.log(res);\n        var payment = {\n            planId: plan.id,\n            planName: plan.name,\n            price:plan.price,\n            total: plan.total,\n            tax: plan.tax,\n            signature: res.razorpay_signature,\n            orderId: res.razorpay_order_id,\n            currency: plan.currency,\n            email: user.email,\n            paymentId: res.razorpay_payment_id,\n            userId: user.id\n        };\n\n        //console.log(payment);\n        PaymentService.SavePaymentDetails(payment).then(res => {\n            //console.log(res);\n            if (res.status == 200) {\n                let encData = UtilService.Encrypt(res.data);\n                localStorage.setItem(RECEIPT_ID, encData);\n\n                navigate('/receipt');\n            }\n        });\n    }\n\n    return (\n        <div className='col-sm-8'>\n            <h2>Order Details</h2>\n            <hr />\n            <div className=\"card-body\">\n                <ul className=\"list-group list-group-flush\">\n                    <li className=\"list-group-item d-flex justify-content-between align-items-center border-0 px-0\">\n                        Plan Details\n                        <span>{plan.name}</span>\n                    </li>\n                    <li className=\"list-group-item d-flex justify-content-between align-items-center border-0 px-0\">\n                        Amount\n                        <span>{plan.price}</span>\n                    </li>\n                    <li className=\"list-group-item d-flex justify-content-between align-items-center border-0 px-0\">\n                        Tax ({TAX.GST}%)\n                        <span>+{plan.tax}</span>\n                    </li>\n                    <li className=\"list-group-item d-flex justify-content-between align-items-center  px-0 mb-3\">\n                        <strong>Total Amount</strong>\n                        <span><strong>{plan.total}</strong></span>\n                    </li>\n                </ul>\n                <a onClick={payWithRazorPay} className=\"btn btn-primary btn-block\">Pay With RazorPay</a>\n            </div>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}